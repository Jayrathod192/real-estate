!function(c){"use strict";c.easyjobs=c.easyjobs||{},c(document).ready(function(){c.easyjobs.init()}),c.easyjobs.init=function(){c.easyjobs.handleJobSearch(),c.easyjobs.handlePipelineCandidateChange(),c.easyjobs.handlePipelineStage(),c.easyjobs.searchFilterCandidates(),c.easyjobs.checkApiKey(),c.easyjobs.renderCandidateResume(),c.easyjobs.handleCopyText(),c.easyjobs.connectPlugin(),c.easyjobs.disconnectApi(),c.easyjobs.handlePagination(),c.easyjobs.handleJobDropdown(),c.easyjobs.handleCandidateDetailsTab(),c.easyjobs.handleAllCandidateSearchFilter(),c.easyjobs.handleAllCandidatePagination(),c.easyjobs.handleAllCandidateSearchFilterReset(),c.easyjobs.handlePipelineHamburgerToggle(),c.easyjobs.handlePipelineCandidateDrag(),c.easyjobs.handlePipelineGridRegenerate(),c.easyjobs.handleSignInOptionToggle(),c.easyjobs.handleSignIn(),c.easyjobs.handleCompanySelect(),c.easyjobs.initSelect2(),c.easyjobs.handleSignUp(),c.easyjobs.handleCompanyCreate(),c.easyjobs.handleMovePipleButtonDisplay(),c.easyjobs.handleJobDelete(),c.easyjobs.handleAdminMenuHighlight(),c.easyjobs.handleCandidateExport(),c.easyjobs.handleCandidateInvite(),c.easyjobs.handleRating(),c.easyjobs.handleGreetingModal(),c.easyjobs.handleWatchVideo(),c.easyjobs.handleNoteAdd(),c.easyjobs.handleNoteDelete(),c.easyjobs.handleRemoveCandidate(),c.easyjobs.handleConfirmationAction(),c.easyjobs.handleSyncData(),c.easyjobs.handlePipelineTemplateSelect(),c.easyjobs.handleJobFilter(),c.easyjobs.handleResendInvitation(),c.easyjobs.handlePendingCandidate(),c.easyjobs.handleDuplicateJob()},c.easyjobs.handleJobSearch=function(){var e,a=c(".easyjobs-job-search");a.on("keyup",function(){clearTimeout(e),e=setTimeout(function(){g()},1e3)}),a.on("keydown",function(){clearTimeout(e)})},c.easyjobs.handlePipelineCandidateChange=function(){c("a.change-pipeline").on("click",function(e){e.preventDefault();var a=c(this),t=c(".pipeline-box .pipeline-content"),n=a.data("key"),e=a.data("job-id"),s=[],a=c(".applicant:checked");c.each(a,function(e,a){s.push(parseInt(c(a).val()))}),i(n,s,e,t,function(){window.location.replace(easyJobsJs.current_page)})}),c(".candidate-details-pipeline a.stage").on("click",function(e){e.preventDefault();var a=c(this),t=c(".candidate-details-user"),n=a.data("stage"),s=a.data("job-id"),e=a.data("candidate-id");i(n,[e],s,t,function(){c(".candidate-details-pipeline .pipeline-toggle").html(a.html())})})},c.easyjobs.handlePipelineStage=function(){c("body").on("click",".add-new-stage",function(e){e.preventDefault();var a=c("#add_new_stage"),e=a.val().trim(),t=[];e.length?["applied","selected","rejected"].includes(e.toLowerCase())?a.siblings(".error-message").html("This step title already exists. Please enter a unique step title."):(c(".save-pipeline").find('input[name="pipeline[]"]').each(function(e,a){t.push(c(a).val().toLowerCase())}),t.includes(e.toLowerCase())?a.siblings(".error-message").html("This step title already exists. Please enter a unique step title."):(c(".pipeline-main-wrapper .extra-stage-wrapper").prepend(p(e)),a.val(""),a.siblings(".error-message").html(""))):a.siblings(".error-message").html("Please write the step name")}),c("body").on("click",".delete-stage",function(e){e.preventDefault(),c(this).parents(".input-wrapper").remove()}),c("body").on("submit",".save-pipeline",function(e){e.preventDefault();var a=c(this),t=a.data("nonce"),e=a.data("job-id"),n=c(".modal"),a=a.find('input[name="pipeline[]"]'),s=[];a.each(function(e,a){a=c(a);0===parseInt(a.data("stage-id"))?s.push({id:"0",name:a.val(),order:e,default:1,is_fixed:1}):s.push({id:a.data("stage-id"),name:a.val(),order:e,default:0,is_fixed:0})}),c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:s,nonce:t,job_id:e,action:"easyjobs_save_pipeline"},beforeSend:function(){n.addClass("loading")},success:function(e){"success"===JSON.parse(e).status.trim()&&window.location.replace(easyJobsJs.current_page)},complete:function(){n.removeClass("loading")}})}),c("#pipeline-modal").on("hide.bs.modal",function(){var e=c("#add_new_stage");e.val(""),e.siblings(".error-message").html("")})},c.easyjobs.searchFilterCandidates=function(){var e,a=c(".easyjobs-search-candidates"),t=c(".ej-job-candidate-filter select");c(".ej-candidate-search").on("submit",function(e){e.preventDefault(),u(o())}),a.on("keyup",function(){clearTimeout(e),e=setTimeout(function(){u(o())},1e3)}),a.on("keydown",function(){clearTimeout(e)}),c(".easyjobs-filter .filter, .easyjobs-filter .stage-filter").on("change",function(e){e.preventDefault(),u(o())}),t.on("change",function(e){e.preventDefault(),u(o())})},c.easyjobs.checkApiKey=function(){c("#easyjobs-submit-general").off("click").on("click",function(e){e.preventDefault();var a=c(this),t=a.data("nonce"),n=a.data("key"),e=a.parents("#easyjobs-settings-form").serializeArray();c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:e,nonce:t,key:n,action:"easyjobs_connect_api"},beforeSend:function(){a.html("<span>Saving...</span>")},success:function(e){"success"===e.trim()?(swal({title:"Api Connected!",text:"Click OK to continue",icon:"success",buttons:[!1,"Ok"],timer:2e3}),setTimeout(function(){location.reload()},500)):swal({title:"Api Not Connected, Invalid api key!",text:"Click OK to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){a.html("Save Settings")}})})},c.easyjobs.renderCandidateResume=function(){c('.candidate-tabs a[data-toggle="tab"]').on("shown.bs.tab",function(e){e=c(e.target).attr("href");"#resume"===e&&((e=c(e).find(".resume-link").data("resume-link")).length?c(".candidate-resume-iframe").html('<iframe width="100%" height="500" src=" '+e+'#toolbar=0&navpanes=0&scrollbar=0" frameborder="0"></iframe>'):c(".candidate-resume-iframe").html('<h4 class="empty-message">Not found</h4>'))})},c.easyjobs.handleCopyText=function(){c("body").on("click",".easyjobs-copy-shortcode",function(){var e=c(this),a=e.parent(".easyjobs-control-wrapper ").find(".easyjobs-settings-field"),e=e.find(".easyjobs-copytext");a.select(),document.execCommand("copy"),e.html("Copied: "+a.val())}),c("body").on("mouseout",".easyjobs-copy-shortcode",function(){c(this).find(".easyjobs-copytext").html("Copy to clipboard")})},c.easyjobs.connectPlugin=function(){c(".ej-connect-form-btn").on("click",function(e){e.preventDefault();var a=c(this),t=a.data("nonce"),n=a.data("key"),s=a.parents(".ej-connect-form"),e=s.serializeArray(),s=s.find('input[name="easyjobs_api_key"]');s.val()?c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:e,nonce:t,key:n,action:"easyjobs_connect_api"},beforeSend:function(){a.html("<span>Connecting...</span>")},success:function(e){("success"===e.trim()?c("#apiConnectStatus").find(".ej-success-msg"):c("#apiConnectStatus").find(".ej-error-msg")).show(),c("#apiConnectStatus").modal()},complete:function(){a.html("Connect")}}):s.siblings(".error-message").length||s.after('<div class="error-message">Please insert api key</div>')}),c("#apiConnectStatus").on("hide.bs.modal",function(e){window.location=easyJobsJs.admin_url+"?page=easyjobs-admin&welcome=yes"})},c.easyjobs.disconnectApi=function(){c(".easyjobs-footer-link-general").on("click",function(e){e.preventDefault();var a=c(this),t=a.data("nonce"),e=a.data("key");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{nonce:t,key:e,action:"easyjobs_disconnect_api"},beforeSend:function(){a.html("<span>Disconnecting...</span>")},success:function(e){"success"===e.trim()?(swal({title:"Api Disconnected successfully",text:"Click OK to continue",icon:"success",buttons:[!1,"Ok"],timer:2e3}),setTimeout(function(){window.location.href=easyJobsJs.admin_url+"?page=easyjobs-admin"},500)):swal({title:"Api Disconnect failed",text:"Click OK to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){a.html("Disconnect Api")}})})},c.easyjobs.handlePagination=function(){c("body").on("click",".easyjobs-next-page-link",function(e){e.preventDefault();e=c(this).parents(".pagination-list").find(".pagination-list__item--active").next(".pagination-list__item ").find("a").attr("href");"#"!==e&&(window.location=e)}),c("body").on("click",".easyjobs-prev-page-link",function(e){e.preventDefault();e=c(this).parents(".pagination-list").find(".pagination-list__item--active").prev(".pagination-list__item ").find("a").attr("href");"#"!==e&&(window.location=e)})},c.easyjobs.handleJobDropdown=function(){c(".ej-job-type-select .dropdown-item").on("click",function(){var e=c(this),a=e.html(),t=e.attr("href").replace("#","");e.siblings(".dropdown-item").removeClass("active"),"published-jobs"!==t?c(".ej-active-filter").hide():c(".ej-active-filter").fadeIn(),c(".ej-job-type-select .dropdown-toggle").html(a)})},c.easyjobs.handleCandidateDetailsTab=function(){c(".applicant-details .nav-tabs .nav-link").on("click",function(){c(this).siblings(".nav-link").removeClass("active")})},c.easyjobs.handleAllCandidateSearchFilter=function(){var e,a=c(".ej-all-candidate-search");a.on("keyup",function(){clearTimeout(e),e=setTimeout(function(){w(_())},1e3)}),a.on("keydown",function(){clearTimeout(e)}),c(".candidates-filter .ej-candidate-job-select, .candidates-filter .ej-candidate-rating-select, .candidates-filter .ej-candidate-status-select").on("change",function(e){e.preventDefault(),w(_())})},c.easyjobs.handleAllCandidatePagination=function(){c("body").on("click",".ej-js-pagination li a:not('.ej-pagination-control')",function(e){e.preventDefault();var a=c(this).data("page-number"),e=(c(".ej-all-candidates"),_());e.page=a,w(e)}),c("body").on("click",".ej-candidate-next-page-link",function(e){e.preventDefault();var a=c(this).parents(".pagination-list").find(".pagination-list__item--active").next(".pagination-list__item ").find("a"),e=c(a).data("page-number"),a=_();a.page=e,w(a)}),c("body").on("click",".ej-candidate-prev-page-link",function(e){e.preventDefault();var a=c(this).parents(".pagination-list").find(".pagination-list__item--active").prev(".pagination-list__item").find("a"),e=c(a).data("page-number"),a=_();a.page=e,w(a)})},c.easyjobs.handleAllCandidateSearchFilterReset=function(){c(".ej-all-candidate-reset").on("click",function(e){e.preventDefault(),c(".ej-all-candidate-search").val("").html(""),c(".ej-candidate-job-select").val("select"),c(".ej-candidate-rating-select").val("select"),c(".ej-candidate-status-select").val("select"),w({})})},c.easyjobs.handlePipelineHamburgerToggle=function(){c(".pipeline-hamburger").on("click",function(e){e.preventDefault(),c(this).toggleClass("hamburger-button-active"),c(".pipeline-nav").toggleClass("hamburger-menu-show")})},c.easyjobs.handlePipelineCandidateDrag=function(){c(".pipeline__board--content").sortable({connectWith:".pipeline__board--content",cursor:"move",items:"li.pipeline-card",beforeStop:function(e,a){a=c(a.item[0]).parents(".pipeline__board--content").find(".pipeline-card-not-found");a.length&&a.remove()},update:function(e,a){var t,s,n,i,o,l;a.sender&&(t=(o=c(a.item[0])).data("applicant-id"),n=(s=a.sender).data("pipeline-id"),a=(i=o.parents(".pipeline__board--content")).data("pipeline-id"),o=i.data("job-id"),l=c("#pipeline-list-box"),n!==a&&(s.find(".pipeline-card").length||s.append('<li class="pipeline-card-not-found"><p>No candidates found</p></li>'),c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{pipeline_id:a,applicants_id:[t],job_id:o,action:"easyjobs_change_pipeline"},beforeSend:function(){l.addClass("ej-loading")},success:function(e){var a,t,n;"success"===JSON.parse(e).status.trim()&&(a=s.siblings(".pipeline__board--title").find(".candidates-number"),t=parseInt(a.html()),n=i.siblings(".pipeline__board--title").find(" .candidates-number"),e=parseInt(n.html()),t&&a.html(t-1),n.html(e+1))},complete:function(){l.removeClass("ej-loading")}})))}}).disableSelection()},c.easyjobs.handlePipelineGridRegenerate=function(){c(".toggler-button").on("show.bs.tab",function(e){var a=c(e.target),t=a.data("job-id"),n=c(".pipeline-tab-content"),e=a.attr("href").replace("#","");a.parents(".content-area__body").find(".pipeline-move-btn").hide(),"pipeline-box"===e&&c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{job_id:t,action:"easyjobs_get_pipeline"},beforeSend:function(){n.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()&&x(e.data)},complete:function(){n.removeClass("ej-loading")}})})},c.easyjobs.handleSignInOptionToggle=function(){c(".alt__login").on("click",function(e){e.preventDefault();var a=c(this),e=c("."+a.data("target"));a.removeClass("active").siblings(".alt__login").addClass("active"),e.siblings(".connect-option").hide(),e.fadeIn(200).addClass("active")}),c(".create-account-btn").on("click",function(e){e.preventDefault(),c(".landing-tabs li:first-child a").removeClass("active"),c(".landing-tabs li:last-child a").addClass("active"),c(".landing-tab-content .tab-pane:first-child").removeClass("active show"),c(".landing-tab-content .tab-pane:last-child").addClass("active show")}),c(".sign-in-btn").on("click",function(e){e.preventDefault(),c(".landing-tabs li:last-child a").removeClass("active"),c(".landing-tabs li:first-child a").addClass("active"),c(".landing-tab-content .tab-pane:last-child").removeClass("active show"),c(".landing-tab-content .tab-pane:first-child").addClass("active show")})},c.easyjobs.handleSignIn=function(){c(".ej-login-form").on("submit",function(e){e.preventDefault();var n=c(this),a=n.serializeArray(),e=n.data("nonce"),t=c(".sign-in.connect-option");l(n)&&c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:a,nonce:e,action:"easyjobs_signin"},beforeSend:function(){t.addClass("ej-loading")},success:function(e){var t=JSON.parse(e);"success"===t.status.trim()?("reload"===(e=t.action.trim())&&(swal({title:"Signed in successfully",text:"Click ok to continue",icon:"success",buttons:[!1,"Ok"]}),setTimeout(function(){window.location.href=easyJobsJs.admin_url+"?page=easyjobs-admin&welcome=yes"},500)),"create_company"===e&&(window.location.href=easyJobsJs.current_page+"&landing_view=create_company&user="+t.user_key),"select_company"===e&&(c(".connect-option").each(function(e,a){c(a).hide()}),c(".social-signin").hide(),c(".company-select").fadeIn(200).find("select").append(s(t.companies)))):(t.error_type&&"invalid_nonce"===t.error_type.trim()&&swal({title:t.message,text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"]}),c.each(t.errors,function(e,a){"global"===e.trim()?swal({title:t.errors.global,text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"]}):r(n,e,a)}))},complete:function(){t.removeClass("ej-loading")}})})},c.easyjobs.handleCompanySelect=function(){c(".ej-company-select-form").on("submit",function(e){e.preventDefault();var a=c(this),t=c(".login-box"),e=a.data("nonce"),a=a.find('select[name="select_company"]');a.val()||a.siblings(".error-message").length||a.after('<div class="error-message"> Please select company </div>'),c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{company:a.val(),nonce:e,action:"easyjobs_save_company"},beforeSend:function(){t.addClass("ej-loading")},success:function(e){var a=c("#apiConnectStatus");("success"===e.trim()?a.find(".ej-success-msg"):a.find(".ej-error-msg")).show(),a.modal()},complete:function(){t.removeClass("ej-loading")}})})},c.easyjobs.initSelect2=function(){c(".ej-select").select2(),c(".tag-select select").select2({placeholder:"Tag a manager"})},c.easyjobs.handleSignUp=function(){c(".ej-signup-form").on("submit",function(e){e.preventDefault();var n=c(this),a=n.data("nonce"),e=n.serializeArray(),t=!0,s=null,i=null,o=c(".easy-page-body .login-box");c.each(e,function(e,a){"password"===a.name&&(s=a.value),"password_confirm"===a.name&&(i=a.value),t=d(n,a.name,a.value)}),t&&(s&&i&&s!==i?r(n,"password_confirm","Password confirmation dose not match"):c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:e,nonce:a,action:"easyjobs_signup"},beforeSend:function(){o.addClass("ej-loading")},success:function(e){var t=JSON.parse(e);"success"===t.status.trim()?location.href=easyJobsJs.current_page+"&landing_view=create_company&user="+t.user_key:c.each(t.errors,function(e,a){"global"===e.trim()?swal({title:t.errors.global,text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"]}):r(n,e,a)})},complete:function(){o.removeClass("ej-loading")}}))})},c.easyjobs.handleCompanyCreate=function(){c(".ej-company-create-form").on("submit",function(e){e.preventDefault();var t,n=c(this),a=n.serializeArray(),s=n.data("user-key"),i=n.data("nonce"),o=c(".easy-page-body .login-box"),e=n.find('input[name="terms_and_policy"]');a.push({name:"terms_and_policy",value:e.is(":checked")?"true":""}),l(n,a)&&(t=null,a.map(function(e,a){"industry"===e.name&&(t={value:e.value,index:a})}),n.find("industry"),e=c(".ej-select.industry-select").select2("data"),a[t.index]={name:"industry",value:{id:t.value,name:e[0].text.trim()}},c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:a,user_key:s,nonce:i,action:"easyjobs_create_company"},beforeSend:function(){o.addClass("ej-loading")},success:function(e){var t=JSON.parse(e);"success"===t.status.trim()?window.location.href=easyJobsJs.admin_url+"?page=easyjobs-admin&welcome=yes":c.each(t.errors,function(e,a){"global"===e.trim()?swal({title:t.errors.global,text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"]}):r(n,e,a)})},complete:function(){o.removeClass("ej-loading")}}))})},c.easyjobs.handleMovePipleButtonDisplay=function(){c(document).on("change",'.pipeline-checkbox input[type="checkbox"]',function(){var e=c(this),a=c(".pipeline-move-btn");e.is(":checked")?a.fadeIn(100):e.parents(".pipeline-tab").find('.pipeline-checkbox input[type="checkbox"]').filter(function(e,a){return c(a).is(":checked")}).length||a.hide()})},c.easyjobs.handleJobDelete=function(){c(".delete-job").on("click",function(e){e.preventDefault();var a=c(this),t=a.data("job-id"),e=a.data("nonce"),n=a.parents(".ej-jobs");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{job_id:t,nonce:e,action:"easyjobs_delete_job"},beforeSend:function(){n.addClass("ej-loading")},success:function(e){"success"===JSON.parse(e).status.trim()?(swal({title:"Job deleted successfully!!",text:"Click ok to continue",icon:"success",buttons:[!1,"Ok"]}),setTimeout(function(){location.reload()},1500)):swal({title:"Job delete failed",text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){n.removeClass("ej-loading")}})})},c.easyjobs.handleAdminMenuHighlight=function(){var t=c(".toplevel_page_easyjobs-admin").find(".wp-submenu.wp-submenu-wrap"),e=window.location.search.replace("?page=",""),a=window.location.hash.replace("#/","");"easyjobs"===e.trim()&&"settings"===a.trim()&&(t.find("li").removeClass("current"),t.find("li a:contains('Settings')").addClass("current").parent("li").addClass("current")),window.addEventListener("hashchange",function(){var e=window.location.search.replace("?page=",""),a=window.location.hash.replace("#/","");"easyjobs"===e.trim()&&"settings"===a.trim()&&(t.find("li").removeClass("current"),t.find("li a:contains('Settings')").addClass("current").parent("li").addClass("current"))})},c.easyjobs.handleCandidateExport=function(){c(".ej-export-candidates").on("click",function(e){e.preventDefault();var a=c(".candidates-table .table-wrap"),e=c(".easyjobs-job-id").val();c(".candidates-table .table__body .table__row").length?c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{job_id:e,action:"easyjobs_export_job_candidates",keywords:o()},beforeSend:function(){a.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()&&e.data.url?window.location.href=e.data.url:swal({title:"Unable to export candidates",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){a.removeClass("ej-loading")}}):swal({title:"No candidates to export",text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"],timer:1500})})},c.easyjobs.handleCandidateInvite=function(){var e=c(".ej-invite-candidate-modal"),a=c(".ej-invite-candidate-modal .modal-dialog .modal-content .invite__candidate--table .table-wrap");e.on("show.bs.modal",function(){O()}),e.on("hidden.bs.modal",function(){a.html(""),c(".ej-invite-candidate .error-message").html("")}),c(".ej-invite-candidate").on("submit",function(e){e.preventDefault();var a=c(this),e=a.find(".user-email").val();e.length?J({email:e},!1):a.find(".error-message").html("Please insert email address")}),c("body").on("click",".delete-invitation",function(e){e.preventDefault();var a=c(this),t=c(".ej-invite-candidate-modal .modal-dialog .modal-content"),e=c(".easyjobs-job-id").val(),a=a.parents(".table__row").data("candidate-email");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{id:e,action:"easyjobs_post_data",type:"delete_invitation",data:{email:a}},beforeSend:function(){t.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?(swal({title:"Invitation removed",text:"Click ok to continue",icon:"success",buttons:[!1,"Ok"],timer:2e3}),O()):swal({title:"Unable to remove invitation",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){t.removeClass("ej-loading")}})})},c.easyjobs.handleRating=function(){c("body").on("mouseover",".user__text__ratting .rate-count",function(){var e=c(this);e.addClass("rated"),e.prevAll(".rate-count").addClass("rated"),e.nextAll(".rate-count").removeClass("rated")}),c("body").on("mouseleave",".user__text__ratting",function(){c(this).find(".rate-count").each(function(e,a){a=c(a);a.hasClass("has-rating")?a.addClass("rated"):a.removeClass("rated")})}),c(".candidates-table .rate-count").on("click",function(e){e.preventDefault();e=c(this);a(e,c(".candidates-table"),e.parents(".table__row").data("candidate-id"))}),c(".applicant-details .user-info__list .rate-count").on("click",function(e){e.preventDefault();e=c(this);a(e,c(".applicant-details .user-info__list"),new URL(window.location.href).searchParams.get("candidate-id"),!0)}),c(".user__ratting--removable").on("click",function(e){e.preventDefault();e=c(".user__ratting .candidate-rating").val();0!==parseInt(e)&&c(this).parents(".easy-page-body").find(".dg-wrapper.ratting-confirmation").fadeIn(300)}),c(".remove-rating-cancel").on("click",function(e){e.preventDefault(),c(this).parents(".dg-wrapper").removeAttr("data-id"),c(this).parents(".dg-wrapper").removeAttr("data-action"),c(this).parents(".dg-wrapper").fadeOut(200)}),c(".remove-rating").on("click",function(e){e.preventDefault();var a=c(this);c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{id:new URL(window.location.href).searchParams.get("candidate-id"),action:"easyjobs_post_data",type:"rate_candidate",data:{rating:0}},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?(swal({title:"Rating removed successfully",text:"Click ok to continue",icon:"success",buttons:[!1,"Ok"]}),setTimeout(function(){window.location.reload()},1200)):swal({title:"Unable to remove rating",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"],timer:2e3})},complete:function(){a.parents(".dg-wrapper").fadeOut(100)}})})},c.easyjobs.handleGreetingModal=function(){c(".greeting-close-btn").on("click",function(e){e.preventDefault(),c(this).parents(".modal").removeClass("show")})},c.easyjobs.handleWatchVideo=function(){c(".ej-intro-video .watch-button").on("click",function(e){e.preventDefault(),c(".ej-intro-video .content__thumb img").hide(),c(this).hide();var a=c(".ej-intro-video .video").find("iframe"),e=a.attr("src");a.attr("src",e+"&autoplay=1"),c(".ej-intro-video .video").fadeIn(300)})},c.easyjobs.handleNoteAdd=function(){c(".ej-add-note").on("submit",function(e){e.preventDefault();var a=c(this),e=a.data("candidate-id"),t=a.find("textarea");if(!t.val().length)return t.addClass("has-error"),void(t.siblings(".error-message").length?t.siblings(".error-message").html("Please write some note"):t.after('<div class="error-message">Please write some note</div>'));c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{form_data:a.serializeArray(),candidate_id:e,action:"easyjobs_save_candidate_note"},beforeSend:function(){a.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?(A(t),a.parents(".ej-candidate-notes-from").siblings(".ej-candidate-notes").length?N(e.data,!1):N(e.data,!0),t.val(""),c(".tag-select select").val(null).trigger("change")):D(t,e.message)},complete:function(){a.removeClass("ej-loading")}})})},c.easyjobs.handleNoteDelete=function(){c("body").on("click",".note-info .erase-button",function(e){e.preventDefault();var a=c(this).parents(".note-info").data("note-id"),e=c(".ej-candidate-confirmation");return e.find(".dg-content").html("Are you sure, you want to remove this note?"),e.attr("data-action","delete-note").attr("data-id",a).fadeIn(200),!1})},c.easyjobs.handleRemoveCandidate=function(){c(".ej-remove-candidate").on("click",function(e){e.preventDefault();var a=R(),e=c(".ej-candidate-confirmation");e.find(".dg-content").html("Are you sure, you want to remove this candidate?"),e.attr("data-action","delete-candidate").attr("data-id",a).fadeIn(200)})},c.easyjobs.handleConfirmationAction=function(){c("body").on("click",".ej-candidate-action-confirm",function(){var e=document.querySelector(".ej-candidate-confirmation"),a=e.dataset.id,e=e.dataset.action;"delete-note"===e.toString()&&n(a),"delete-candidate"===e.toString()&&t([a])})},c.easyjobs.handleSyncData=function(){c(".ej-sync-btn").on("click",function(e){e.preventDefault();var a=c(this),e=a.data("nonce");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{nonce:e,action:"easyjobs_sync_data"},beforeSend:function(){a.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?(I(e.message,{type:"success",autoClose:1200}),setTimeout(function(){window.location=easyJobsJs.current_page},1500)):I(e.message,{type:"danger",autoClose:1200})},complete:function(){a.removeClass("ej-loading")}})})},c.easyjobs.handlePipelineTemplateSelect=function(){c(".ej-pipeline-template-select").on("change",function(){var t=c(this),n=t.val();swal({title:"Are you sure",text:"If you change pipeline template the candidates will be moved to 'Applied' step. Are you sure you want to make this change?",icon:"warning",buttons:!0}).then(function(e){var a;e&&0!==parseInt(n)&&(e=t.parents(".modal-body").find(".pipeline-step-list"),a="",e.addClass("ej-loading"),(n=n.split(",")).map(function(e){a+=p(e,!0)}),["Selected","Rejected"].map(function(e){a+=b(e)}),e.find(".pipeline-main-wrapper").html(c.parseHTML(a)),e.removeClass("ej-loading"))})})},c.easyjobs.handleJobFilter=function(){c('.ej-active-filter input[type="checkbox"]').on("change",function(){var e=c(this),a=e.val().toString().trim();e.is(":checked")?("active"===a&&c(".has-active-job").fadeIn(200),"expired"===a&&c(".has-expired-job").fadeIn(200)):("active"===a&&c(".has-active-job").fadeOut(200),"expired"===a&&c(".has-expired-job").fadeOut(200))})},c.easyjobs.handleResendInvitation=function(){c("body").on("click",".resend-invitation",function(e){e.preventDefault();var a=c(this).parents(".table__row"),t=a.data("candidate-email"),e=a.data("candidate-type");"invited"==e?J({email:t},!0,e):(a=a.data("candidate-id"))?J({candidates:a},!0,e):swal({title:"Candidate not found",text:"Click ok to continue",icon:"error",buttons:[!1,"Ok"]})})},c.easyjobs.handlePendingCandidate=function(){var e=c(".ej-pending-candidate-modal"),t=c(".ej-pending-candidate-modal .modal-dialog .modal-content .invite__candidate--table .table-wrap");e.on("show.bs.modal",function(){L(t)}),e.on("hidden.bs.modal",function(){t.html("")}),c("body").on("click",".ej-delete-pending-invitation",function(e){e.preventDefault();var a=c(this),e=c(".easyjobs-job-id").val(),a=a.parents(".table__row").data("candidate-id");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{candidate:a,job_id:e,action:"easyjobs_delete_pending_candidate"},beforeSend:function(){t.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?L(t):swal({title:"Candidate not removed",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){t.removeClass("ej-loading")}})})},c.easyjobs.handleDuplicateJob=function(){c("body").on("click",".ej-duplicate-job",function(e){e.preventDefault();var a=c(this),t=a.data("job-id"),e=a.data("nonce"),n=a.parents(".ej-jobs");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{nonce:e,job_id:t,action:"easyjobs_duplicate_job"},beforeSend:function(){n.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?e.data.id&&(window.location.href=easyJobsJs.admin_url+"?page=easyjobs#/edit/"+e.data.id):swal({title:"Unable to duplicate job",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){n.removeClass("ej-loading")}})})};var t=function(e){var a=c(".ej-job-id").val(),t=c(".applicant-details");c(".ej-candidate-confirmation").fadeOut(150),c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{job:a,candidates:e,action:"easyjobs_delete_candidate"},beforeSend:function(){t.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?(I(e.message,{type:"success",autoClose:1200}),setTimeout(function(){window.location=easyJobsJs.admin_url+"?page=easyjobs-candidates"},1300)):I(e.message,{type:"danger",autoClose:2e3})},complete:function(){t.removeClass("ej-loading")}})},n=function(e){var a=c(".ej-candidate-notes-from form").data("candidate-id"),t=c('.note-info[data-note-id="'+e+'"]');c(".ej-candidate-confirmation").fadeOut(150),c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{note_id:e,candidate_id:a,action:"easyjobs_delete_candidate_note"},beforeSend:function(){t.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?(t.fadeOut(200).remove(),I("Note deleted successfully",{type:"success"})):I(e.message?e.messgae:"Unable to delete note",{type:"danger"})},complete:function(){t.removeClass("ej-loading")}})},i=function(e,a,t,n,s){c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{pipeline_id:e,applicants_id:a,job_id:t,action:"easyjobs_change_pipeline"},beforeSend:function(){n.addClass("ej-loading")},success:function(e){"success"===JSON.parse(e).status.trim()&&s.call()},complete:function(){n.removeClass("ej-loading")}})},l=function(t,e){var e=e||t.serializeArray(),n=0;return c.each(e,function(e,a){d(t,a.name,a.value)&&n++}),n===e.length},d=function(e,a,t){var n=e.find('input[name="'+a+'"]'),s=n.siblings(".error-message"),i=n.parent();return t.length?((i.hasClass("input-group")||i.hasClass("checkbox"))&&(s=i.siblings(".error-message"),n.parent().removeClass("has-error")),s.length&&(n.removeClass("has-error"),s.remove()),!0):(r(e,a),!1)},r=function(e,a,t){var n=e.find('input[name="'+a+'"]'),s=n.parent(),e=n.siblings(".error-message"),a=t||"The "+a.replaceAll("_"," ")+" field is required.";s.hasClass("input-group")||s.hasClass("checkbox")?(e=s.siblings(".error-message"),s.addClass("has-error")):n.addClass("has-error"),e.length?e.html(a):(s.hasClass("input-group")||s.hasClass("checkbox")?s:n).after('<div class="error-message"> '+a+" </div>")},s=function(e,a){var t="";return c.each(e,function(e,a){t+='<option value="'+a.value+'">'+a.name+"</option>"}),t},o=function(){var e=c(".easyjobs-search-candidates").val(),a=c(".easyjobs-filter .filter:checked"),t="",n=c(".stage-filter:checked"),s=c(".ej-job-candidate-filter select").val(),i=[];return a.each(function(){i.push(c(this).val())}),n.length&&c.each(n,function(e,a){t+=c(a).val(),e+1!==n.length&&(t+=",")}),{search:e,filter:i,pipeline:t,sortBy:"select"!==s?s:""}},u=function(e){var a=c(".candidates-table .table-wrap"),t=c(".easyjobs-job-id").val();c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{parameters:e,job_id:t,action:"easyjobs_search_filter_candidates"},beforeSend:function(){a.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status&&(e.candidates.length?(e=f(e.candidates),c(".candidates-table .table__body").html(e)):c(".candidates-table .table__body").html(h()))},complete:function(){c(".search-easyjobs-candidates").find('input[type="text"]').val(""),a.removeClass("ej-loading")}})},p=function(e,a=!1){var t='<div class="input-wrapper pipeline-wrapper">',n="applied"===e.toLowerCase()?"default-step":"",s="applied"===e.toLowerCase()?0:"";return t+='<input type="text" name="pipeline[]" disabled="disabled" class="form-control pipeline-stage '+n+'" value="'+e+'" data-stage-id="'+s+'">',t+='<a href="#" class="input-wrapper-append delete-stage"><i class="easyjobs-icon easyjobs-delete"></i></a>',t+="</div>",a?t:c.parseHTML(t)},b=function(e){var a='<div class="input-wrapper pipeline-wrapper">';return a+='<input type="text" disabled="disabled" class="form-control pipeline-stage default-step" value="'+e+'" />',a+="</div>"},f=function(e){var s="",i=easyJobsJs.easyjobs_admin_url,o=c(".ej-job-candidate-filter select").val(),l=c(".easyjobs-ai-enabled").val();return c.each(e,function(e,a){var t=S("final_score"),n=a.final_ai_score;s+=' <div class="table__row" data-candidate-id="'+a.id+'">',s+='<div class="table-cell user__info">',s+='<a href="'+i+"&candidate-id="+a.id+' " class="d-flex align-items-center">',s+='<div class="user__image">',s+='<img src="'+a.user.profile_image+'" alt="" class="w-100 img-fluid">',s+="</div>",s+='<h4 class="user__name">'+a.user.name+"</h4>",s+="</a></div>",l&&(a.showAiScore?(s+='<div class="table-cell user-ai-score has-ai-score">',"select"!==o&&("SORT_BY_SKILL_MATCH"===o&&(t=S("skill"),n=a.skills_score),"SORT_BY_EDUCATION_MATCH"===o&&(t=S("education"),n=a.education_score),"SORT_BY_EXPERIENCE_MATCH"===o&&(t=S("experience"),n=a.experience_score),"SORT_BY_QUIZ_SCORE"===o&&(t=S("quiz"),n=Math.round(a.quiz_marks_obtain/a.quiz_marks_total*100))),n&&(s+='<div class="progress">',s+='<div class="progress-bar" role="progressbar" style="width: '+n+"%; background-color: "+t+'" aria-valuemin="0" aria-valuemax="100" aria-valuenow="'+n+'">',s+=n+"%",s+="</div></div>",a.scores&&Object.keys(a.scores).length&&(s+='<div class="ai-score-details"><ul>',c.each(a.scores,function(e,a){null!==a&&(s+="<li>",s+=P(e.replace("_"," "))+": ",s+='<strong style="color: '+S(e)+'">'+a+"%</strong>",s+="</li>")}),s+="</ul></div>")),s+="</div>"):s+='<div class="table-cell user-ai-score"></div>');n=a.pipeline.name||"";s+='<div class="table-cell candidate-apply-time">'+a.created_at+"</div>",s+='<div class="table-cell job__status">',s+='<div class="semi-button h-modified '+m(n)+' w-100">'+n+"</div>",s+="</div>",s+='<div class="table-cell user-rate">',s+='<div class="user__text__ratting">'+v(a.rating)+"</div>",s+="</div>",s+="</div>"}),c.parseHTML(s)},m=function(e){if(e)switch(e.trim().toLowerCase()){case"selected":return"success-label";case"rejected":return"danger-label";default:return"primary-label"}return""},v=function(e){for(var a="",t=1;t<=5;t++)a+='<div class="rate-count',a+=t<=e?' rated has-rating">':'">',a+='<i class="easyjobs-icon easyjobs-star"></i></div>';return a+=""},h=function(e){e=e||"No candidates found";return c.parseHTML('<h4 class="empty-message">'+e+"</h4>")},g=function(){var e=c(".ej-tab-content"),a=c(".easyjobs-job-search").val(),n=c(".ej-tab-content .tab-pane.active").attr("id");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{keyword:a,type:n,action:"easyjobs_search_jobs"},beforeSend:function(){e.addClass("ej-loading")},success:function(e){var a=JSON.parse(e),t=c("#"+n+" .ej-jobs");"success"===a.status?a.jobs.length?(e=a.jobs,a=j(e,n,a.job_page_links),t.html(a)):c("#"+n+".ej-jobs").html(h("No Jobs Found")):t.html('<div class="col"><h4 class="empty-message">No jobs found</h4></div>')},complete:function(){e.removeClass("ej-loading")}})},j=function(e,t,n){var s="",i=easyJobsJs.easyjobs_admin_url,o=easyJobsJs.easyjobs_app_url;return c.each(e,function(e,a){s+='<div class="col"><div class="job-card">',s+='<div class="card-thumbnail" style="background-image: url('+a.banner_image+')">',a.is_expired?s+='<div class="thumbnail__status thumbnail__status--danger">Expired</div>':s+=y(a.status),s+='<div class="card-control">',s+='<a href="'+i+"&job-id="+a.id+'&view=pipeline" class="control-button control-button--primary">',s+='<div class="control-button__icon"><i class="easyjobs-icon easyjobs-pipe"></i></div>',s+="<span>Pipeline</span>",s+="</a>",s+='<a href="'+i+"&job-id="+a.id+'&view=candidates" class="control-button control-button--primary">',s+='<div class="control-button__icon"><i class="easyjobs-icon easyjobs-users"></i></div>',s+="<span>Candidates</span>",s+="</a>",s+='<a href="'+o+"/job/"+a.id+'/edit" target="_blank" class="control-button control-button--primary">',s+='<div class="control-button__icon"><i class="easyjobs-icon easyjobs-document"></i></div>',s+="<span>Edit</span>",s+="</a>","published-jobs"===t&&(s+='<div class="dropdown job-control-more">',s+='<button class="control-button control-button--primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">',s+='<div class="control-button__icon"><i class="easyjobs-icon easyjobs-plus"></i></div><span>More</span>',s+="</button>",s+='<ul class="dropdown-menu dropdown-menu-center">',s+=' <a class="dropdown-item" href="'+n[a.id]+'" target="_blank"><div class="dropdown-icon"><i class="easyjobs-icon easyjobs-eye-1"></i></div>View</a>',a.hasOwnProperty("social_links")&&(s+='<div class="share-button">',s+='<a class="dropdown-item" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><div class="dropdown-icon"><i class="easyjobs-icon easyjobs-share"></i></div>Share</a>',s+='<div class="share-button-menu">',s+='<a class="dropdown-item" href="'+a.social_links.facebook+'"><div class="dropdown-icon"><i class="easyjobs-icon easyjobs-facebook"></i></div>facebook</a>',s+='<a class="dropdown-item" href="'+a.social_links.facebook+'"><div class="dropdown-icon"><i class="easyjobs-icon easyjobs-linkedin"></i></div>linkedin</a>',s+='<a class="dropdown-item" href="'+a.social_links.facebook+'"><div class="dropdown-icon"><i class="easyjobs-icon easyjobs-twitter"></i></div>twitter</a>',s+="</div>",s+="</div>"),s+="</ul>",s+="</div>"),s+="</div>",s+="</div>",s+='<div class="card-content">',s+='<div class="card-content__left">',s+='<h3 class="card-title">'+a.title+"</h3>",s+='<h4 class="card-sub-title">'+a.category.name+"</h4>",s+='<div class="card-info-group">',s+='<p class="card-info">Post Date: '+a.created_at+"</p>",s+='<p class="card-info">Expiry Date: '+a.expire_at+"</p>",s+="</div>",s+="</div>",s+=' <div class="card-content__right">',s+="<p>"+a.applicant_count+" Applied</p>",a.hasOwnProperty("applicants")&&(s+='<div class="applicants__img">',c.each(a.applicants,function(e,a){s+='<img src="'+a.image+'" alt="" />'}),s+='<p class="Applicants">'+a.applicant_count+"</p>",s+="</div>"),s+="</div>",s+="</div>",s+="</div></div>"}),c.parseHTML(s)},y=function(e){switch(e){case 1:return'<div class="thumbnail__status thumbnail__status--warning">Draft</div>';case 2:return'<div class="thumbnail__status thumbnail__status--success">Active</div>';case 3:return'<div class="thumbnail__status thumbnail__status--info">Archived</div>';case 4:return'<div class="thumbnail__status thumbnail__status--danger">Deleted</div>';case 10:return'<div class="thumbnail__status thumbnail__status--success">Republished</div>';default:return'<div class="thumbnail__status thumbnail__status--success">Active</div>'}},_=function(){var e=c(".ej-all-candidate-search").val(),a=c(".ej-candidate-job-select").val(),t=c(".ej-candidate-rating-select").val(),n=c(".ej-candidate-status-select").val(),s={};return e.length&&(s.candidate_name=e),"select"!==a&&(s.job_id=a),"select"!==t&&(s.rating=t),"select"!==n&&(s.status=n),s},w=function(t){var n=c(".ej-all-candidates");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{parameters:t,action:"easyjobs_search_filter_all_candidates"},beforeSend:function(){n.addClass("ej-loading")},success:function(e){var a=JSON.parse(e);"success"===a.status&&a.data.data.length?(e=k(a.data.data),n.html(e),a=C(parseInt(a.data.current_page),parseInt(a.data.per_page),parseInt(a.data.total),t),c(".ej-all-candidates-pagination").html(a)):n.html('<div class="col"><h4 class="empty-message">No candidates found</h4></div>')},complete:function(){n.removeClass("ej-loading")}})},k=function(e){var n="";return c.each(e,function(e,a){var t=0<a.rating?"":"disabled";n+='<div class="col"><div class="user-card">',n+='<div class="user__ratting info-button-light '+t+'">',n+='<i class="easyjobs-icon easyjobs-star"></i> '+a.rating,n+="</div>",n+='<div class="user-picture">',n+='<img src="'+a.profile_image+'" alt="applicant-img" class="img-fluid" />',n+="</div>",n+='<div class="user-info">',n+="<h5>"+a.name+"</h5>",a.job_title&&(n+="<p>"+a.job_title+"</p>"),n+="</div>",n+='<a href=" '+easyJobsJs.easyjobs_admin_url+"&candidate-id="+a.id+' " class="semi-button semi-button-info mt-auto"> View details </a>',n+="</div></div>"}),c.parseHTML(n)},C=function(e,a,t,n){var s=Math.ceil(t/a),i="";if(1<s){i+='<ul class="pagination-list pt-5 ej-js-pagination">',i+='<li class="pagination-list__item"><a class="pagination-list__link ej-pagination-control ej-candidate-prev-page-link" href="#"><i class="easyjobs-icon easyjobs-arrow-left"></i></a></li>';for(var o=1;o<=s;o++)i+='<li class="pagination-list__item '+(e===o?"pagination-list__item--active":"")+'">',i+='<a class="pagination-list__link" href="#" data-page-number="'+o+'">'+o+"</a>",i+="</li>";i+='<li class="pagination-list__item"><a class="pagination-list__link ej-pagination-control ej-candidate-next-page-link" href="#"><i class="easyjobs-icon easyjobs-arrow-right"></i></a></li>',i+="</ul>"}return c.parseHTML(i)},x=function(e){var n=c(".pipeline-box"),s=easyJobsJs.easyjobs_admin_url;c.each(e,function(e,a){var t="";n.find(".pipeline-"+a.name.toLowerCase().replace(" ","-")+" .candidates-number").html(a.applicants.length),c.each(a.applicants,function(e,a){t+='<div class="col"> <div class="pipeline-card">',t+='<div class="user__image">',t+='<img src=" '+a.user.profile_image+' " alt="" class="w-100 img-fluid">',t+="</div>",t+='<div class="user__details">',a.user.name.length&&(t+='<a class="user__name" href="'+s+"&candidate-id="+a.id+' " >'+a.user.name+"</a>"),t+='<div class="d-flex">',a.user.nationality&&(t+='<span class="user__address">'+a.user.nationality+"</span>"),t+='<p class="user__experience"> '+a.user.experience+" Years</p>",t+="</div>",t+='<div class="d-flex justify-content-between mt-3">',t+='<div class="user__text__ratting"> '+v(a.rating)+" </div>",t+='<div class="application-duration"> '+a.updated_diff+" </div>",t+="</div>",t+='<label class="checkbox pipeline-checkbox">',t+='<input type="checkbox" class="applicant" value=" '+a.id+' " id="applicant- '+a.id+' ">',t+="<span></span></label>",t+="</div>",t+="</div></div>"}),n.find("#"+a.name.toLowerCase().replace(" ","-")+" .row").html(t)})},S=function(e){switch(e){case"quiz":return"#ff9635";case"skill":return"#2fc1e1";case"education":return"#597dfc";case"experience":return"#60ce83";default:return"#ff5f74"}},J=function(e,a,t){var n=c(".easyjobs-job-id").val(),s=c(".ej-invite-candidate"),i=t?t.trim():"invited",t="invited"===i?"invite_candidate":"pending_candidate",o=c("invited"===i?".ej-invite-candidate-modal .modal-dialog .modal-content":".ej-pending-candidate-modal .modal-dialog .modal-content");c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{id:n,action:"easyjobs_post_data",type:t,data:e},beforeSend:function(){o.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?(swal({title:"Invitation link is sent to candidate",text:"Click ok to continue",icon:"success",buttons:[!1,"Ok"],timer:2e3}),a||O()):swal({title:"Unable to invite candidates",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"],timer:2e3})},complete:function(){o.removeClass("ej-loading"),a||(s.find(".user-email").val(""),s.find(".error-message").html(""))}})},O=function(){var e=c(".ej-invite-candidate-modal .modal-dialog .modal-content"),a=c(".ej-invite-candidate-modal .modal-dialog .modal-content .invite__candidate--table .table-wrap"),t=c(".easyjobs-job-id").val();c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{job_id:t,action:"easyjobs_get_invited_candidates"},beforeSend:function(){e.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?e.data.length?a.removeClass("d-none").html(T(e.data)):a.html('<h6 class="empty-message">No invitation found.</h6>'):swal({title:"Unable to get candidates",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){e.removeClass("ej-loading")}})},T=function(e){var t="";return t+='<div class="table table-modal">',t+='<div class="table__row table__head">',t+='<div class="table-cell">Name</div><div class="table-cell">Email</div>',t+='<div class="table-cell" style="width: 110px;"><span class="d-flex justify-content-end">Actions</span></div>',t+="</div>",c.each(e,function(e,a){t+='<div class="table__row" data-candidate-email="'+a.email+'" data-candidate-type="invited">',t+='<div class="table-cell">'+a.name+"</div>",t+='<div class="table-cell"> <span class="text-break">'+a.email+" </span> </div>",t+=' <div class="table-cell" style="width: 110px;"> <div class="d-flex justify-content-end">',t+='<a href="#" class="control-button control-button--warning resend-invitation"><div class="control-button__icon"><i class="easyjobs-icon easyjobs-send"></i></div></a>',t+='<a href="#" class="control-button control-button--danger delete-invitation"><div class="control-button__icon"><i class="easyjobs-icon easyjobs-delete"></i></div></a>',t+="</div></div>",t+="</div>"}),t+="</div>"},P=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},a=function(a,e,t,n){var s=5-a.nextAll(".rate-count").length,n=n||!1;c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{id:t,action:"easyjobs_post_data",type:"rate_candidate",data:{rating:s}},beforeSend:function(){e.addClass("ej-loading")},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?(a.addClass("rated has-rating"),a.prevAll(".rate-count").addClass("rated has-rating"),a.nextAll(".rate-count").removeClass("rated has-rating"),n?window.location.reload():swal({title:"Rated successfully",text:"Click ok to continue",icon:"success",buttons:[!1,"Ok"],timer:1500})):swal({title:"Unable rate candidate",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"],timer:2e3})},complete:function(){e.removeClass("ej-loading")}})},D=function(e,a){e.addClass("has-error"),e.next(".error-message").length?e.next(".error-message").html(a):e.after('<div class="error-message">'+a+"</div>")},A=function(e){e.removeClass("has-error"),e.next(".error-message").length&&e.next(".error-message").html("")},N=function(e,a){var t="";a&&(t+='<div class="details__card gutter-10 ej-candidate-notes"> <div class="details__card__body">'),t+='<div class="note-info" data-note-id="'+e.id+'">',t+='<a href="#" class="erase-button"><i class="easyjobs-icon easyjobs-delete"></i></a>',t+='<div class="label__full--eraseble label__full--primary">',t+="<p> ",t+=e.note,e.tags.length&&(t+='<span class="tag-container">',c.each(e.tags,function(e,a){t+='<span class="tag-name">@'+a.name+"</span>"}),t+="</span>"),t+="</p>",t+="</div>",t+='<div class="note-admin-info">',t+='<div class="note-by"><strong>'+e.creator+"</strong></div>",t+='<div class="note-time"><span>'+e.created_at+"</span></div>",t+="</div>",t+="</div>",t+="</div>",a&&(t+="</div></div>"),a?c(".ej-candidate-notes-from").after(t):c(".ej-candidate-notes .details__card__body").prepend(t)},I=function(e,a){var t='<div class="ej-toast bg-info">';if(a.hasOwnProperty("type"))switch(a.type.toString()){case"success":t='<div class="ej-toast bg-success">';break;case"warning":t='<div class="ej-toast bg-warning">';break;case"danger":t='<div class="ej-toast bg-danger">'}if(t+='<div class="ej-toast-body d-flex align-items-center">',a.hasOwnProperty("type"))switch(a.type.toString()){case"success":t+='<i class="dashicons dashicons-yes-alt"></i>';break;case"warning":case"danger":t+='<i class="dashicons dashicons-warning"></i>';break;default:t+='<i class="dashicons dashicons-info"></i>'}t+="<span>"+e+"</span></div>";var n=c(t+="</div>");n.appendTo(".easy-page-body").animate({right:"30px",opacity:1},300,"swing",function(){var e=2500;a.hasOwnProperty("autoClose")&&(e=a.autoClose),setTimeout(function(){n.animate({right:"-30px",opacity:0},200,"swing",function(){n.remove()})},e)})},R=function(){var e=new URLSearchParams(window.location.search);return e.has("candidate-id")?e.get("candidate-id"):null},L=function(a){var e=c(".ej-invite-candidate-modal .modal-dialog .modal-content"),t=c(".easyjobs-job-id").val();c.ajax({type:"POST",url:easyJobsJs.ajax_url,data:{job_id:t,action:"easyjobs_get_pending_candidates"},beforeSend:function(){e.addClass("ej-loading"),a.removeClass("d-none").html('<p class="py-3">Loading candidates...</p>')},success:function(e){e=JSON.parse(e);"success"===e.status.trim()?e.data.length?a.removeClass("d-none").html(M(e.data)):a.html('<h6 class="empty-message m-0 pl-0 py-3">No Pending candidates found.</h6>'):swal({title:"Unable to get candidates",text:e.message||"Click ok to continue",icon:"error",buttons:[!1,"Ok"]})},complete:function(){e.removeClass("ej-loading")}})},M=function(e){var t="";return t+='<div class="table table-modal">',t+='<div class="table__row table__head">',t+='<div class="table-cell">Name</div><div class="table-cell">Email</div><div class="table-cell">Updated on</div>',t+='<div class="table-cell" style="width: 110px;"><span class="d-flex justify-content-end">Actions</span></div>',t+="</div>",c.each(e,function(e,a){t+='<div class="table__row" data-candidate-email="'+a.email+'" data-candidate-type="pending" data-candidate-id="'+a.id+'">',t+='<div class="table-cell">'+a.name+"</div>",t+='<div class="table-cell"> <span class="text-break">'+a.email+" </span> </div>",t+='<div class="table-cell"> <span class="text-break">'+a.last_update+" </span> </div>",t+=' <div class="table-cell" style="width: 110px;"> <div class="d-flex justify-content-end">',t+='<a href="#" class="control-button control-button--warning resend-invitation"><div class="control-button__icon"><i class="easyjobs-icon easyjobs-send"></i></div></a>',t+='<a href="#" class="control-button control-button--danger ej-delete-pending-invitation" ><div class="control-button__icon"><i class="easyjobs-icon easyjobs-delete"></i></div></a>',t+="</div></div>",t+="</div>"}),t+="</div>"}}(jQuery);